<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elements Panel Test - ScriptEase</title>
    <script type="module" src="/src/main.tsx"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            font-family: system-ui, -apple-system, sans-serif;
            min-height: 100vh;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .test-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
            height: 80vh;
        }
        .script-area {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 12px;
            padding: 1.5rem;
        }
        .script-textarea {
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }
        .script-textarea::placeholder {
            color: rgba(156, 163, 175, 0.6);
        }
        .elements-container {
            background: rgba(30, 41, 59, 0.3);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 12px;
            padding: 1rem;
            overflow: hidden;
        }
        .test-instructions {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        .test-instructions h3 {
            margin: 0 0 0.5rem 0;
            color: #60a5fa;
        }
        .test-instructions ul {
            margin: 0;
            padding-left: 1.5rem;
        }
        .test-instructions li {
            margin-bottom: 0.25rem;
            color: #cbd5e1;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>Elements Panel Test</h1>
            <p>Test character and location tracking functionality</p>
        </div>

        <div class="test-instructions">
            <h3>Test Instructions:</h3>
            <ul>
                <li>Type or paste script content in the left textarea</li>
                <li>Watch the Elements panel on the right automatically detect characters and locations</li>
                <li>Characters should be detected from ALL CAPS names before dialogue</li>
                <li>Locations should be extracted from scene headings (INT./EXT.)</li>
                <li>Switch between Characters and Locations tabs to see different elements</li>
                <li>Verify scene associations and counts are accurate</li>
            </ul>
        </div>

        <div class="test-content">
            <div class="script-area">
                <textarea 
                    id="script-content" 
                    class="script-textarea"
                    placeholder="Type your script here to test element detection...

Example script:

FADE IN:

INT. COFFEE SHOP - DAY

A cozy coffee shop buzzes with morning activity. ANNA (25), a determined writer, sits at a corner table with her laptop.

ANNA
(typing furiously)
This is it. This is the scene that changes everything.

MARK (30s) approaches her table, carrying two cups of coffee.

MARK
Mind if I sit? You look like you could use some company.

ANNA
(looking up, surprised)
Oh! I... sure, I guess.

Mark sits down and slides one coffee toward her.

MARK
I'm Mark. I've seen you here every day for the past week.

ANNA
Anna. And yes, I'm working on something important.

EXT. COFFEE SHOP - LATER

Anna and Mark walk out together, continuing their conversation.

MARK
So what's this important project?

ANNA
A screenplay. About a writer who meets someone in a coffee shop.

They both laugh.

INT. ANNA'S APARTMENT - NIGHT

Anna sits at her desk, typing. Her phone buzzes with a text from Mark.

ANNA
(reading aloud)
'Thanks for the coffee and conversation. Same time tomorrow?'

She smiles and types back.

ANNA (CONT'D)
(typing)
Wouldn't miss it.

FADE OUT."
                ></textarea>
            </div>
            
            <div class="elements-container">
                <div id="elements-panel-container"></div>
            </div>
        </div>
    </div>

    <script type="module">
        import { createElement } from 'react';
        import { createRoot } from 'react-dom/client';
        import ElementsPanel from '/src/components/ElementsPanel.tsx';

        const container = document.getElementById('elements-panel-container');
        const root = createRoot(container);

        const textarea = document.getElementById('script-content');
        
        function updateElementsPanel() {
            const content = textarea.value;
            root.render(createElement(ElementsPanel, { 
                content: content,
                className: 'h-full'
            }));
        }

        // Initial render
        updateElementsPanel();

        // Update on content change
        textarea.addEventListener('input', updateElementsPanel);

        // Set initial content for testing
        textarea.value = `FADE IN:

INT. COFFEE SHOP - DAY

A cozy coffee shop buzzes with morning activity. ANNA (25), a determined writer, sits at a corner table with her laptop.

ANNA
(typing furiously)
This is it. This is the scene that changes everything.

MARK (30s) approaches her table, carrying two cups of coffee.

MARK
Mind if I sit? You look like you could use some company.

ANNA
(looking up, surprised)
Oh! I... sure, I guess.

Mark sits down and slides one coffee toward her.

MARK
I'm Mark. I've seen you here every day for the past week.

ANNA
Anna. And yes, I'm working on something important.

EXT. COFFEE SHOP - LATER

Anna and Mark walk out together, continuing their conversation.

MARK
So what's this important project?

ANNA
A screenplay. About a writer who meets someone in a coffee shop.

They both laugh.

INT. ANNA'S APARTMENT - NIGHT

Anna sits at her desk, typing. Her phone buzzes with a text from Mark.

ANNA
(reading aloud)
Thanks for the coffee and conversation. Same time tomorrow?

She smiles and types back.

ANNA (CONT'D)
(typing)
Wouldn't miss it.

FADE OUT.`;

        // Trigger initial update
        updateElementsPanel();
    </script>
</body>
</html>